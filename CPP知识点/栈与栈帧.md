#### 程序栈
过程调用的实现，依靠的是一个由系统分配的一个栈空间：

机器用栈来传递过程参数，存储返回信息，保存寄存器用于以后恢复，以及本地存储
为单个过程分配的那部分栈称为“栈帧“。
程序栈通常和堆共享，也就是说,它们共享一块内存区域。程序栈通常占据这块区域的下部，而堆用的是上部，也就是栈下堆上。

注意：如果程序递归层数过多，可能会导致内存空间被耗尽，出现栈溢出的情况。这时就可能出现程序非正常退出（崩溃╮(╯▽╰)╭）。

#### 程序栈的结构：
![[20190427211854414.png|300]]
![[20190520233114650.png|400]]
#### 栈帧
程序栈存放帧(stack frame),栈帧有时候也称为活跃记录(activation record)或者是活跃帧(activation frame)，栈帧存放函数参数和局部变量，管理动态内存。

系统在创建栈帧时，将参数以跟声明时相反的顺序推到帧上，最后推入局部变量。

一个过程调用结束后（返回函数调用结果的时候），对应的帧就应该被从栈中退出：

程序栈会把调用者的帧的帧底指针的值取出来，然后把调用者的帧的帧底指针的值赋给ebp，再把返回地址弹出来，让程序跳到返回地址所指的地方继续执行。esp在退回去的过程中，退到临时变量时，会依次调用临时变量的析构函数（如果有的话）（这就是出了函数作用域临时变量就不再有效的原因），接着程序栈就又回到了调用这个帧之前的状态。
然后它会继续完成调用者的调用过程。
